var DelmaResourceCalculator=function(e){var n={};function u(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,u),r.l=!0,r.exports}return u.m=e,u.c=n,u.d=function(t,r,e){u.o(t,r)||Object.defineProperty(t,r,{enumerable:!0,get:e})},u.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},u.t=function(r,t){if(1&t&&(r=u(r)),8&t)return r;if(4&t&&"object"==typeof r&&r&&r.__esModule)return r;var e=Object.create(null);if(u.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:r}),2&t&&"string"!=typeof r)for(var n in r)u.d(e,n,function(t){return r[t]}.bind(null,n));return e},u.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return u.d(r,"a",r),r},u.o=function(t,r){return Object.prototype.hasOwnProperty.call(t,r)},u.p="",u(u.s=0)}([function(t,r,e){"use strict";function g(t,r){for(var e=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=r,u=!1,o=0;!u;){n<=0&&(u=!0);var i=t.find(function(t){return Number(t.length)===Number(n.toFixed(e))});void 0!==i&&(u=!0,o=i),n-=Math.pow(10,-e)}return o}function p(t,r){var e=t.findIndex(function(t){return t.index===r.index});0<=e&&t.splice(e,1)}function v(t){return t.map(function(t){return function(u){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{},r=Object.keys(o);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(o).filter(function(t){return Object.getOwnPropertyDescriptor(o,t).enumerable}))),r.forEach(function(t){var r,e,n;r=u,n=o[e=t],e in r?Object.defineProperty(r,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):r[e]=n})}return u}({},t)})}function y(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=[],n=!0,u=!1,o=void 0;try{for(var i,s=t[Symbol.iterator]();!(n=(i=s.next()).done)&&(e.push(i.value),!r||e.length!==r);n=!0);}catch(t){u=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(u)throw o}}return e}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t,r){for(var e=0;e<r.length;e++){var n=r[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}e.r(r),e.d(r,"DelmaResourceCalculator",function(){return n});var n=function(){function r(t){!function(t,r){if(!(t instanceof r))throw new TypeError("Cannot call a class as a function")}(this,r),this.data=t,this.output=null,this.logger=function(){}}var t,e,n;return t=r,(e=[{key:"setLogger",value:function(t){return this.logger=t,this}},{key:"setAssetLength",value:function(t){return this.assetLength=t,this.logger({step:1,status:1}),this}},{key:"setCuttingEdgeWidth",value:function(t){return this.cuttingEdge=t,this.logger({step:2,status:1}),this}},{key:"setCalculationAccuracy",value:function(t){return this.calculationAccuracy=t,this.logger({step:3,status:1}),this}},{key:"calculate",value:function(t){try{var r=function(t){try{var o=[];return t.forEach(function(t,r){for(var e=t.length,n=t.number,u=0;u<n;u++)o.push({index:r,length:e})}),o.sort(function(t,r){return r.length-t.length}),{err:null,result:o}}catch(t){return{err:t,result:null}}}(this.data),e=r.err,n=r.result;if(e)return this.logger({step:4,status:0,error:e}),this;this.logger({step:4,status:1});var u=function(t,r){var e,n=r.assetLength,u=r.cuttingEdge,o=r.calculationAccuracy;try{var i=v(t),s=[],a=[];do{if(0<a.length){var l=0===(e=a).length?0:e.reduce(function(t,r){return t+r.length},0),c=n-u*a.length-l;if(0<c){var h=g(i,c,o);h?(p(i,h),a.push(h)):(s.push(a),a=[])}else s.push(a),a=[]}else{var f=y(i,1)[0];a.push(f),p(i,f)}0===i.length&&s.push(a)}while(0<i.length);return{err:null,result:s}}catch(t){return{err:t,result:null}}}(n,{assetLength:this.assetLength,cuttingEdge:this.cuttingEdge,calculationAccuracy:this.calculationAccuracy}),o=u.err,i=u.result;if(o)return this.logger({step:5,status:0,error:o}),this;this.logger({step:5,status:1});var s=function(t){try{var e={},r=[];return t.forEach(function(t){var r="";t.forEach(function(t){r+=t.index}),r in e?e[r].push(t):e[r]=[t]}),Object.values(e).forEach(function(t){r.push({group:t[0],number:t.length})}),{err:null,result:r}}catch(t){return{err:t,result:null}}}(i),a=s.err,l=s.result;if(a)return this.logger({step:6,status:0,error:a}),this;this.logger({step:6,status:1});var c=function(t,u){try{var o=[];return t.forEach(function(t){var r=t.group,e=t.number,n=[];r.forEach(function(t){var r=t.index;n.push(u[r])}),o.push({group:n,number:e})}),{err:null,result:o}}catch(t){return{err:t,result:null}}}(l,this.data),h=c.err,f=c.result;if(h)return this.logger({step:7,status:0,error:h}),this;this.logger({step:7,status:1}),t(this.output=f),this.logger({step:8,status:1})}catch(t){this.output=null,this.logger({step:8,status:0,error:t})}return this}},{key:"analyze",value:function(t){var u=this;if(null===this.output)return this;try{var r=null,e=null;try{this.logger({step:9,status:1}),r=this.output.reduce(function(t,r){return t+r.number},0),e=this.output.reduce(function(t,r){var e=r.group,n=e.reduce(function(t,r){return t+r.length},0);return t+(u.assetLength-n-(e.length-u.cuttingEdge))},0)}catch(t){this.logger({step:9,status:0,error:t})}t({totalConsumption:r,totalWaste:e}),this.logger({step:10,status:1})}catch(t){this.logger({step:10,status:0,error:t})}return this}}])&&u(t.prototype,e),n&&u(t,n),r}()}]);